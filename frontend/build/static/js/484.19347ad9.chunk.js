"use strict";(self.webpackChunkdabba_app=self.webpackChunkdabba_app||[]).push([[484],{5484:(e,s,a)=>{a.r(s),a.d(s,{default:()=>c});var t=a(5043),l=a(3216),r=a(5187),d=a(1373),i=a(579);const n=e=>{var s,a,l,r,n,c,x,m,o,u,h;let{orderId:j,userId:N}=e;const[v,g]=(0,t.useState)(null),[y,b]=(0,t.useState)(!0),[p,f]=(0,t.useState)(null),[w,D]=(0,t.useState)(new Date);(0,t.useEffect)(()=>{if(!j)return;const e=d.Ay.subscribeToOrderUpdates(j,e=>{g(e),b(!1),f(null)});return()=>{e&&e()}},[j]),(0,t.useEffect)(()=>{const e=setInterval(()=>{D(new Date)},6e4);return()=>clearInterval(e)},[]);const E=()=>{const e=[{status:d.w8.PENDING,label:"Order Placed",icon:"\ud83d\udccb"},{status:d.w8.CONFIRMED,label:"Order Confirmed",icon:"\u2705"},{status:d.w8.PREPARING,label:"Preparing Food",icon:"\ud83d\udc68\u200d\ud83c\udf73"},{status:d.w8.OUT_FOR_DELIVERY,label:"Out for Delivery",icon:"\ud83d\ude9a"},{status:d.w8.DELIVERED,label:"Delivered",icon:"\ud83c\udf89"}];return(null===v||void 0===v?void 0:v.status)===d.w8.CANCELLED?[{status:d.w8.PENDING,label:"Order Placed",icon:"\ud83d\udccb"},{status:d.w8.CANCELLED,label:"Order Cancelled",icon:"\u274c"}]:e};if(y)return(0,i.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,i.jsxs)("div",{className:"animate-pulse",children:[(0,i.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full"}),(0,i.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,i.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]})});if(p||!v)return(0,i.jsx)("div",{className:"max-w-4xl mx-auto p-6 text-center",children:(0,i.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-red-800 mb-2",children:"Order Not Found"}),(0,i.jsx)("p",{className:"text-red-600",children:p||"Unable to load order details. Please check your order ID."})]})});const A=E(),I=E().findIndex(e=>e.status===(null===v||void 0===v?void 0:v.status)),C=(()=>{if(!v||v.status===d.w8.DELIVERED||v.status===d.w8.CANCELLED)return null;const e=d.Ay.calculateDeliveryTime(v.createdAt?new Date(1e3*v.createdAt.seconds):new Date,v.status);if(!e)return null;const s=e.getTime()-w.getTime();if(s<=0)return"Any moment now!";const a=Math.ceil(s/6e4);return"".concat(a," minute").concat(1!==a?"s":"")})();return(0,i.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Track Your Order"}),(0,i.jsxs)("p",{className:"text-gray-600",children:["Order #",v.orderNumber]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,i.jsx)("div",{className:"lg:col-span-2",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"Order Status"}),(0,i.jsx)("div",{className:"space-y-6",children:A.map((e,s)=>{const a=s<=I,t=s===I,l=v.status===d.w8.CANCELLED&&e.status===d.w8.CANCELLED;return(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-lg ".concat(a||l?l?"bg-red-100 text-red-600":"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"),children:e.icon})}),(0,i.jsxs)("div",{className:"ml-4 flex-1",children:[(0,i.jsx)("h3",{className:"text-lg font-medium ".concat(a||l?l?"text-red-800":"text-green-800":"text-gray-500"),children:e.label}),t&&!l&&(0,i.jsxs)("p",{className:"text-sm text-blue-600 font-medium",children:["Current Status",C&&(0,i.jsxs)("span",{className:"ml-2 text-gray-600",children:["\u2022 ETA: ",C]})]})]}),s<A.length-1&&(0,i.jsx)("div",{className:"absolute left-6 mt-12 w-0.5 h-6 ".concat(s<I?"bg-green-300":"bg-gray-200"),style:{marginLeft:"1.5rem"}})]},e.status)})}),C&&v.status!==d.w8.DELIVERED&&v.status!==d.w8.CANCELLED&&(0,i.jsx)("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-2xl mr-3",children:"\u23f0"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold text-blue-800",children:"Estimated Delivery Time"}),(0,i.jsxs)("p",{className:"text-blue-600",children:[C," remaining"]})]})]})})]})}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Order Summary"}),(0,i.jsx)("div",{className:"space-y-3",children:null===(s=v.items)||void 0===s?void 0:s.map((e,s)=>(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h4",{className:"font-medium text-gray-800",children:e.name}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["\u20b9",e.price," \xd7 ",e.qty]})]}),(0,i.jsxs)("span",{className:"font-medium text-gray-800",children:["\u20b9",e.price*e.qty]})]},s))}),(0,i.jsx)("hr",{className:"my-4"}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,i.jsxs)("span",{className:"text-gray-800",children:["\u20b9",null===(a=v.pricing)||void 0===a?void 0:a.subtotal]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Delivery Fee"}),(0,i.jsx)("span",{className:"text-gray-800",children:0===(null===(l=v.pricing)||void 0===l?void 0:l.deliveryFee)?(0,i.jsx)("span",{className:"text-green-600",children:"Free"}):"\u20b9".concat(null===(r=v.pricing)||void 0===r?void 0:r.deliveryFee)})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Taxes"}),(0,i.jsxs)("span",{className:"text-gray-800",children:["\u20b9",null===(n=v.pricing)||void 0===n?void 0:n.taxes]})]}),(0,i.jsx)("hr",{className:"my-2"}),(0,i.jsxs)("div",{className:"flex justify-between text-lg font-semibold",children:[(0,i.jsx)("span",{className:"text-gray-800",children:"Total"}),(0,i.jsxs)("span",{className:"text-orange-600",children:["\u20b9",null===(c=v.pricing)||void 0===c?void 0:c.total]})]})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Delivery Details"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-medium text-gray-700",children:"Address"}),(0,i.jsxs)("p",{className:"text-gray-600",children:[null===(x=v.deliveryAddress)||void 0===x?void 0:x.street,(0,i.jsx)("br",{}),null===(m=v.deliveryAddress)||void 0===m?void 0:m.city,", ",null===(o=v.deliveryAddress)||void 0===o?void 0:o.state,(0,i.jsx)("br",{}),null===(u=v.deliveryAddress)||void 0===u?void 0:u.pincode,(null===(h=v.deliveryAddress)||void 0===h?void 0:h.landmark)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("br",{}),"Landmark: ",v.deliveryAddress.landmark]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-medium text-gray-700",children:"Contact"}),(0,i.jsx)("p",{className:"text-gray-600",children:v.contactNumber})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-medium text-gray-700",children:"Payment Method"}),(0,i.jsx)("p",{className:"text-gray-600",children:"cash_on_delivery"===v.paymentMethod?"Cash on Delivery":v.paymentMethod})]}),v.specialInstructions&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-medium text-gray-700",children:"Special Instructions"}),(0,i.jsx)("p",{className:"text-gray-600",children:v.specialInstructions})]})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Order Information"}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Order ID"}),(0,i.jsx)("span",{className:"text-gray-800 font-mono",children:v.id})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Order Number"}),(0,i.jsx)("span",{className:"text-gray-800",children:v.orderNumber})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Order Time"}),(0,i.jsx)("span",{className:"text-gray-800",children:(e=>{if(!e)return"";return(e.seconds?new Date(1e3*e.seconds):new Date(e)).toLocaleString()})(v.createdAt)})]})]})]})]})]})]})},c=()=>{const{orderId:e}=(0,l.g)(),{user:s,provider:a}=(0,r.A)(),t="supabase"===a?null===s||void 0===s?void 0:s.id:null===s||void 0===s?void 0:s.uid;return(0,i.jsx)("div",{className:"min-h-screen text-gray-100 relative bg-gradient-to-br from-gray-950 via-black to-gray-900",children:(0,i.jsx)(n,{orderId:e,userId:t})})}}}]);
//# sourceMappingURL=484.19347ad9.chunk.js.map