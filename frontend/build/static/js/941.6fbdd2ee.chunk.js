"use strict";(self.webpackChunkdabba_app=self.webpackChunkdabba_app||[]).push([[941],{4941:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var r=a(5043),s=a(6446),n=a(5187),i=a(3216),o=a(2339),l=a(579);const d=()=>{const[e,t]=(0,r.useState)("phone"),[a,s]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[x,g]=(0,r.useState)(!1),[p,h]=(0,r.useState)(null),[f,b]=(0,r.useState)(0),{sendOTP:y,verifyOTP:v,isAuthenticated:j,provider:N}=(0,n.A)(),w=(0,i.Zp)(),P=(0,i.zy)();(0,r.useEffect)(()=>{if(j){var e,t;const a=(null===(e=P.state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/";w(a,{replace:!0})}},[j,w,P]),(0,r.useEffect)(()=>()=>{const e=document.getElementById("recaptcha-container");e&&(e.innerHTML="")},[]),(0,r.useEffect)(()=>{let e;return f>0&&(e=setTimeout(()=>b(f-1),1e3)),()=>clearTimeout(e)},[f]);return(0,l.jsxs)("div",{className:"w-full font-sans",children:["phone"===e?(0,l.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!m||m.trim().length<2)return void o.oR.error("Please enter your name");const r=a.replace(/\D/g,"");if(r&&10===r.length){g(!0);try{localStorage.setItem("pendingDisplayName",m.trim());const e="+91".concat(r),a=await y(e);a.success?(h("firebase"===N?a.confirmationResult:null),t("otp"),b(60),o.oR.success("OTP sent successfully!")):o.oR.error(a.error||"Failed to send OTP")}catch(s){console.error("Error sending OTP:",s),o.oR.error("Failed to send OTP. Please try again.")}finally{g(!1)}}else o.oR.error("Please enter a valid phone number")},className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm md:text-base font-medium text-gray-700 mb-1",children:"Your Name"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("span",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400",children:"\ud83d\udc64"}),(0,l.jsx)("input",{type:"text",value:m,onChange:e=>u(e.target.value),placeholder:"e.g., Aman Kumar",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-300 focus:border-transparent transition",required:!0})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm md:text-base font-medium text-gray-700 mb-1",children:"Phone Number"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-orange-500 font-semibold",children:"+91"}),(0,l.jsx)("span",{className:"pointer-events-none absolute inset-y-0 left-12 flex items-center text-gray-400",children:"\ud83d\udcf1"}),(0,l.jsx)("input",{type:"tel",value:a,onChange:e=>{const t=(e=>{const t=e.replace(/\D/g,"").slice(0,10);return t.length>=6?"".concat(t.slice(0,3),"-").concat(t.slice(3,6),"-").concat(t.slice(6)):t.length>=3?"".concat(t.slice(0,3),"-").concat(t.slice(3)):t})(e.target.value);s(t)},placeholder:"XXXXXXXXXX",className:"w-full pl-20 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-300 focus:border-transparent transition",required:!0})]}),(0,l.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Standard rates may apply."})]}),"firebase"===N&&(0,l.jsx)("div",{className:"flex justify-center my-4",children:(0,l.jsx)("div",{id:"recaptcha-container",className:"flex justify-center items-center",style:{transform:"scale(0.9)",transformOrigin:"center"}})}),"supabase"===N&&(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)("div",{className:"text-sm text-gray-600 bg-green-50 px-4 py-2 rounded-lg border border-green-200",children:"\u2705 Using fast, reliable SMS delivery from Dabba Bot. No reCAPTCHA needed."})}),(0,l.jsx)("button",{type:"submit",disabled:x||a.replace(/\D/g,"").length<10||m.trim().length<2,className:"w-full bg-orange-500 hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white py-3 px-6 rounded-xl font-semibold transition",children:x?"Sending...":"Send OTP"})]}):(0,l.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d&&6===d.length){g(!0);try{const e=a.replace(/\D/g,"");if("supabase"===N&&10!==e.length)return o.oR.error("Please enter a valid 10-digit phone number"),void g(!1);const s="+91".concat(e),n="supabase"===N?await v(s,d,{displayName:m}):await v(p,d);if(n.success){var t,r;const e=localStorage.getItem("pendingDisplayName");e&&(localStorage.removeItem("pendingDisplayName"),localStorage.setItem("displayName",e)),o.oR.success("Login successful!");const a=(null===(t=P.state)||void 0===t||null===(r=t.from)||void 0===r?void 0:r.pathname)||"/";w(a,{replace:!0})}else o.oR.error(n.error||"Invalid OTP"),c("")}catch(s){console.error("Error verifying OTP:",s),o.oR.error("Failed to verify OTP. Please try again."),c("")}finally{g(!1)}}else o.oR.error("Please enter a valid 6-digit OTP")},className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm md:text-base font-medium text-gray-700 mb-1",children:"Enter OTP"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("span",{className:"pointer-events-none absolute inset-y-0 left-3 flex items-center text-gray-400",children:"\ud83d\udd12"}),(0,l.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",className:"w-full pl-10 pr-4 text-center text-xl md:text-2xl font-semibold tracking-widest border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-300 transition px-4 py-3",maxLength:6,required:!0})]})]}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-3 md:gap-0",children:[(0,l.jsx)("button",{type:"button",onClick:()=>{t("phone"),c(""),h(null),b(0)},className:"text-orange-500 hover:text-orange-700 font-medium text-sm md:text-base transition",children:"\u2190 Change Number"}),(0,l.jsx)("button",{type:"button",onClick:async()=>{if(!(f>0)){g(!0);try{const e=a.replace(/\D/g,"");if(10!==e.length)return o.oR.error("Please enter a valid 10-digit phone number"),void g(!1);const t="+91".concat(e),r=await y(t);r.success?(h("firebase"===N?r.confirmationResult:null),b(60),o.oR.success("OTP resent successfully!")):o.oR.error(r.error||"Failed to resend OTP")}catch(e){console.error("Error resending OTP:",e),o.oR.error("Failed to resend OTP. Please try again.")}finally{g(!1)}}},disabled:f>0||x,className:"text-orange-500 hover:text-orange-700 font-medium text-sm md:text-base transition disabled:opacity-50 disabled:cursor-not-allowed",children:f>0?"Resend in ".concat(f,"s"):"Resend OTP"})]}),(0,l.jsx)("button",{type:"submit",disabled:x||6!==d.length,className:"w-full bg-orange-500 hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white py-3 px-6 rounded-xl font-semibold transition",children:x?"Verifying...":"Verify OTP"})]}),(0,l.jsx)("div",{className:"mt-6 text-center text-sm md:text-base text-gray-500",children:(0,l.jsxs)("p",{children:["By continuing, you agree to our"," ",(0,l.jsx)("button",{className:"text-orange-500 hover:text-orange-700 underline bg-transparent border-none cursor-pointer",children:"Terms of Service"})," ","and"," ",(0,l.jsx)("button",{className:"text-orange-500 hover:text-orange-700 underline bg-transparent border-none cursor-pointer",children:"Privacy Policy"})]})})]})},c=()=>{const e={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.45,ease:"easeOut"}}};return(0,l.jsxs)("div",{className:"min-h-screen relative overflow-hidden flex flex-col md:flex-row bg-gradient-to-br from-orange-50 via-white to-rose-50 dark:from-gray-950 dark:via-gray-900 dark:to-black",children:[(0,l.jsx)(s.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:.6,scale:1},transition:{duration:1},className:"pointer-events-none absolute -top-32 -left-32 h-96 w-96 rounded-full bg-gradient-to-br from-orange-200 to-rose-200 blur-3xl dark:from-orange-900/30 dark:to-rose-900/30"}),(0,l.jsx)(s.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:.5,scale:1},transition:{duration:1,delay:.15},className:"pointer-events-none absolute -bottom-32 -right-32 h-[28rem] w-[28rem] rounded-full bg-gradient-to-br from-rose-200 to-orange-200 blur-3xl dark:from-rose-900/30 dark:to-orange-900/30"}),(0,l.jsxs)("div",{className:"hidden md:flex md:w-1/2 bg-gradient-to-br from-orange-400 to-red-500 dark:from-orange-800 dark:to-red-900 relative overflow-hidden",children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1544025162-d76694265947?q=80&w=1600&auto=format&fit=crop')] bg-cover bg-center opacity-25"}),(0,l.jsx)("div",{className:"relative z-10 flex flex-col justify-center p-12 text-white",children:(0,l.jsxs)(s.P.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6},className:"max-w-md",children:[(0,l.jsxs)("h1",{className:"text-4xl font-bold mb-4 drop-shadow",children:["Taste of Home,",(0,l.jsx)("br",{}),"Delivered to You"]}),(0,l.jsx)("p",{className:"text-lg mb-8 text-white/90",children:"Experience the warmth of homemade food, just like mom makes it."})]})})]}),(0,l.jsx)("div",{className:"w-full md:w-1/2 flex items-center justify-center p-6 md:p-8",children:(0,l.jsxs)(s.P.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut",when:"beforeChildren",staggerChildren:.08}}},initial:"hidden",animate:"visible",className:"w-full max-w-md bg-white/70 dark:bg-white/5 backdrop-blur rounded-3xl shadow-xl ring-1 ring-gray-200/60 dark:ring-white/10 p-6 md:p-8 transition transform md:hover:-translate-y-0.5 md:hover:shadow-2xl",children:[(0,l.jsx)(s.P.div,{variants:e,className:"text-center mb-6",children:(0,l.jsxs)("div",{className:"relative mx-auto h-14 w-14 rounded-2xl bg-white flex items-center justify-center shadow-sm ring-1 ring-orange-100 overflow-hidden",children:[(0,l.jsx)(s.P.div,{className:"absolute inset-0 rounded-2xl bg-gradient-to-tr from-orange-100 to-rose-100",initial:{opacity:.3},animate:{opacity:[.3,.6,.3]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),(0,l.jsx)("img",{src:"/logo1.png",alt:"Dabba",className:"relative h-10 w-10 object-contain"})]})}),(0,l.jsxs)(s.P.div,{variants:e,className:"text-center mb-6",children:[(0,l.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white",children:"Sign in to your account"}),(0,l.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Welcome back! Continue with your mobile number to get started."})]}),(0,l.jsx)(s.P.div,{variants:e,children:(0,l.jsx)(d,{})}),(0,l.jsxs)(s.P.div,{variants:e,className:"mt-6 flex items-center gap-3",children:[(0,l.jsx)("div",{className:"flex-1 h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent dark:via-white/10"}),(0,l.jsx)("div",{className:"text-xs text-gray-400 dark:text-gray-500 tracking-wider",children:"SECURE LOGIN"}),(0,l.jsx)("div",{className:"flex-1 h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent dark:via-white/10"})]})]})})]})}}}]);
//# sourceMappingURL=941.6fbdd2ee.chunk.js.map