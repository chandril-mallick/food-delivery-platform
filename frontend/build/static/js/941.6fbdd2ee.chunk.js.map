{"version":3,"file":"static/js/941.6fbdd2ee.chunk.js","mappings":"kMAKA,MA4TA,EA5TiBA,KACf,MAAOC,EAAMC,IAAWC,EAAAA,EAAAA,UAAS,UAC1BC,EAAaC,IAAkBF,EAAAA,EAAAA,UAAS,KACxCG,EAAKC,IAAUJ,EAAAA,EAAAA,UAAS,KACxBK,EAAaC,IAAkBN,EAAAA,EAAAA,UAAS,KACxCO,EAASC,IAAcR,EAAAA,EAAAA,WAAS,IAChCS,EAAoBC,IAAyBV,EAAAA,EAAAA,UAAS,OACtDW,EAAWC,IAAgBZ,EAAAA,EAAAA,UAAS,IAErC,QAAEa,EAAO,UAAEC,EAAS,gBAAEC,EAAe,SAAEC,IAAaC,EAAAA,EAAAA,KACpDC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,OAGjBC,EAAAA,EAAAA,WAAU,KACR,GAAIP,EAAiB,CAAC,IAADQ,EAAAC,EACnB,MAAMC,GAAqB,QAAdF,EAAAH,EAASM,aAAK,IAAAH,GAAM,QAANC,EAAdD,EAAgBE,YAAI,IAAAD,OAAN,EAAdA,EAAsBG,WAAY,IAC/CT,EAASO,EAAM,CAAEG,SAAS,GAC5B,GACC,CAACb,EAAiBG,EAAUE,KAG/BE,EAAAA,EAAAA,WAAU,IACD,KAEL,MAAMO,EAAYC,SAASC,eAAe,uBACtCF,IACFA,EAAUG,UAAY,KAGzB,KAGHV,EAAAA,EAAAA,WAAU,KACR,IAAIW,EAIJ,OAHItB,EAAY,IACdsB,EAAQC,WAAW,IAAMtB,EAAaD,EAAY,GAAI,MAEjD,IAAMwB,aAAaF,IACzB,CAACtB,IA6IJ,OACEyB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mBAAkBC,SAAA,CAErB,UAATxC,GACCsC,EAAAA,EAAAA,MAAA,QAAMG,SA/IUC,UAEpB,GADAC,EAAEC,kBACGrC,GAAeA,EAAYsC,OAAOC,OAAS,EAE9C,YADAC,EAAAA,GAAMC,MAAM,0BAGd,MAAMC,EAAW9C,EAAY2B,QAAQ,MAAO,IAC5C,GAAKmB,GAAgC,KAApBA,EAASH,OAA1B,CAIApC,GAAW,GACX,IAEEwC,aAAaC,QAAQ,qBAAsB5C,EAAYsC,QAEvD,MACMO,EAAI,MAAAC,OADKJ,GAETK,QAAevC,EAAQqC,GACzBE,EAAOC,SAGP3C,EADe,aAAbM,EACoBoC,EAAO3C,mBAEP,MAExBV,EAAQ,OACRa,EAAa,IACbiC,EAAAA,GAAMQ,QAAQ,2BAEdR,EAAAA,GAAMC,MAAMM,EAAON,OAAS,qBAEhC,CAAE,MAAOA,GACPQ,QAAQR,MAAM,qBAAsBA,GACpCD,EAAAA,GAAMC,MAAM,wCACd,CAAC,QACCtC,GAAW,EACb,CA3BA,MAFEqC,EAAAA,GAAMC,MAAM,sCAuIqBT,UAAU,YAAWC,SAAA,EAElDF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEiB,EAAAA,EAAAA,KAAA,SAAOlB,UAAU,4DAA2DC,SAAC,eAG7EF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,WAAUC,SAAA,EACvBiB,EAAAA,EAAAA,KAAA,QAAMlB,UAAU,qFAAoFC,SAAC,kBACrGiB,EAAAA,EAAAA,KAAA,SACEC,KAAK,OACLC,MAAOpD,EACPqD,SAAWjB,GAAMnC,EAAemC,EAAEkB,OAAOF,OACzCG,YAAY,mBACZvB,UAAU,qJACVwB,UAAQ,WAKdzB,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEiB,EAAAA,EAAAA,KAAA,SAAOlB,UAAU,4DAA2DC,SAAC,kBAG7EF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,WAAUC,SAAA,EACvBiB,EAAAA,EAAAA,KAAA,OAAKlB,UAAU,iFAAgFC,SAAC,SAChGiB,EAAAA,EAAAA,KAAA,QAAMlB,UAAU,iFAAgFC,SAAC,kBACjGiB,EAAAA,EAAAA,KAAA,SACEC,KAAK,MACLC,MAAOxD,EACPyD,SAtCajB,IACzB,MAAMqB,EAXmBL,KACzB,MAAMM,EAASN,EAAM7B,QAAQ,MAAO,IAAIoC,MAAM,EAAG,IACjD,OAAID,EAAOnB,QAAU,EACb,GAANO,OAAUY,EAAOC,MAAM,EAAE,GAAE,KAAAb,OAAIY,EAAOC,MAAM,EAAE,GAAE,KAAAb,OAAIY,EAAOC,MAAM,IACxDD,EAAOnB,QAAU,EACpB,GAANO,OAAUY,EAAOC,MAAM,EAAE,GAAE,KAAAb,OAAIY,EAAOC,MAAM,IAEvCD,GAIWE,CAAkBxB,EAAEkB,OAAOF,OAC7CvD,EAAe4D,IAqCHF,YAAY,aACZvB,UAAU,qJACVwB,UAAQ,QAGZN,EAAAA,EAAAA,KAAA,KAAGlB,UAAU,6BAA4BC,SAAC,iCAG9B,aAAbtB,IACCuC,EAAAA,EAAAA,KAAA,OAAKlB,UAAU,2BAA0BC,UACvCiB,EAAAA,EAAAA,KAAA,OACEW,GAAG,sBACH7B,UAAU,mCACV8B,MAAO,CAAEC,UAAW,aAAcC,gBAAiB,cAM3C,aAAbrD,IACCuC,EAAAA,EAAAA,KAAA,OAAKlB,UAAU,sBAAqBC,UAClCiB,EAAAA,EAAAA,KAAA,OAAKlB,UAAU,iFAAgFC,SAAC,qFAOpGiB,EAAAA,EAAAA,KAAA,UACEC,KAAK,SACLc,SAAU/D,GAAWN,EAAY2B,QAAQ,MAAO,IAAIgB,OAAS,IAAMvC,EAAYsC,OAAOC,OAAS,EAC/FP,UAAU,oJAAmJC,SAE5J/B,EAAU,aAAe,iBAI9B6B,EAAAA,EAAAA,MAAA,QAAMG,SA1KYC,UAEtB,GADAC,EAAEC,iBACGvC,GAAsB,IAAfA,EAAIyC,OAAhB,CAIApC,GAAW,GACX,IAGE,MAAMuD,EAAS9D,EAAY2B,QAAQ,MAAO,IAC1C,GAAiB,aAAbZ,GAA6C,KAAlB+C,EAAOnB,OAGpC,OAFAC,EAAAA,GAAMC,MAAM,mDACZtC,GAAW,GAGb,MAAM0C,EAAI,MAAAC,OAASY,GACbX,EAAsB,aAAbpC,QACLF,EAAUoC,EAAM/C,EAAK,CAAEE,sBACvBS,EAAUL,EAAoBN,GACxC,GAAIiD,EAAOC,QAAS,CAAC,IAADkB,EAAAC,EAElB,MAAMC,EAAOzB,aAAa0B,QAAQ,sBAC9BD,IAGFzB,aAAa2B,WAAW,sBACxB3B,aAAaC,QAAQ,cAAewB,IAEtC5B,EAAAA,GAAMQ,QAAQ,qBACd,MAAM5B,GAAqB,QAAd8C,EAAAnD,EAASM,aAAK,IAAA6C,GAAM,QAANC,EAAdD,EAAgB9C,YAAI,IAAA+C,OAAN,EAAdA,EAAsB7C,WAAY,IAC/CT,EAASO,EAAM,CAAEG,SAAS,GAC5B,MACEiB,EAAAA,GAAMC,MAAMM,EAAON,OAAS,eAC5B1C,EAAO,GAEX,CAAE,MAAO0C,GACPQ,QAAQR,MAAM,uBAAwBA,GACtCD,EAAAA,GAAMC,MAAM,2CACZ1C,EAAO,GACT,CAAC,QACCI,GAAW,EACb,CArCA,MAFEqC,EAAAA,GAAMC,MAAM,qCAuKuBT,UAAU,YAAWC,SAAA,EAEpDF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEiB,EAAAA,EAAAA,KAAA,SAAOlB,UAAU,4DAA2DC,SAAC,eAG7EF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,WAAUC,SAAA,EACvBiB,EAAAA,EAAAA,KAAA,QAAMlB,UAAU,gFAA+EC,SAAC,kBAChGiB,EAAAA,EAAAA,KAAA,SACEC,KAAK,OACLC,MAAOtD,EACPuD,SAAWjB,GAAMrC,EAAOqC,EAAEkB,OAAOF,MAAM7B,QAAQ,MAAO,IAAIoC,MAAM,EAAG,IACnEJ,YAAY,SACZvB,UAAU,+LACVuC,UAAW,EACXf,UAAQ,WAKdzB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,8EAA6EC,SAAA,EAC1FiB,EAAAA,EAAAA,KAAA,UACEC,KAAK,SACLqB,QApHOC,KACjB/E,EAAQ,SACRK,EAAO,IACPM,EAAsB,MACtBE,EAAa,IAiHHyB,UAAU,oFAAmFC,SAC9F,0BAGDiB,EAAAA,EAAAA,KAAA,UACEC,KAAK,SACLqB,QA3JYrC,UACtB,KAAI7B,EAAY,GAAhB,CACAH,GAAW,GACX,IAEE,MAAMuD,EAAS9D,EAAY2B,QAAQ,MAAO,IAC1C,GAAsB,KAAlBmC,EAAOnB,OAGT,OAFAC,EAAAA,GAAMC,MAAM,mDACZtC,GAAW,GAGb,MAAM0C,EAAI,MAAAC,OAASY,GACbX,QAAevC,EAAQqC,GACzBE,EAAOC,SAEP3C,EADe,aAAbM,EACoBoC,EAAO3C,mBAEP,MAExBG,EAAa,IACbiC,EAAAA,GAAMQ,QAAQ,6BAEdR,EAAAA,GAAMC,MAAMM,EAAON,OAAS,uBAEhC,CAAE,MAAOA,GACPQ,QAAQR,MAAM,uBAAwBA,GACtCD,EAAAA,GAAMC,MAAM,0CACd,CAAC,QACCtC,GAAW,EACb,CA5ByB,GA2Jf8D,SAAU3D,EAAY,GAAKJ,EAC3B8B,UAAS,oIAAsIC,SAE9I3B,EAAY,EAAC,aAAAwC,OAAgBxC,EAAS,KAAM,mBAIjD4C,EAAAA,EAAAA,KAAA,UACEC,KAAK,SACLc,SAAU/D,GAA0B,IAAfJ,EAAIyC,OACzBP,UAAU,oJAAmJC,SAE5J/B,EAAU,eAAiB,mBAMlCgD,EAAAA,EAAAA,KAAA,OAAKlB,UAAU,sDAAqDC,UAClEF,EAAAA,EAAAA,MAAA,KAAAE,SAAA,CAAG,kCAC+B,KAChCiB,EAAAA,EAAAA,KAAA,UAAQlB,UAAU,4FAA2FC,SAAC,qBAEpG,IAAI,MACV,KACJiB,EAAAA,EAAAA,KAAA,UAAQlB,UAAU,4FAA2FC,SAAC,4BC3NxH,EAzFcyC,KAEZ,MAQMC,EAAe,CACnBC,OAAQ,CAAEC,QAAS,EAAGC,EAAG,IACzBC,QAAS,CAAEF,QAAS,EAAGC,EAAG,EAAGE,WAAY,CAAEC,SAAU,IAAMC,KAAM,aAGnE,OACEnD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2KAA0KC,SAAA,EAEvLiB,EAAAA,EAAAA,KAACiC,EAAAA,EAAOC,IAAG,CACTC,QAAS,CAAER,QAAS,EAAGS,MAAO,IAC9BC,QAAS,CAAEV,QAAS,GAAKS,MAAO,GAChCN,WAAY,CAAEC,SAAU,GACxBjD,UAAU,6KAEZkB,EAAAA,EAAAA,KAACiC,EAAAA,EAAOC,IAAG,CACTC,QAAS,CAAER,QAAS,EAAGS,MAAO,IAC9BC,QAAS,CAAEV,QAAS,GAAKS,MAAO,GAChCN,WAAY,CAAEC,SAAU,EAAGO,MAAO,KAClCxD,UAAU,2LAIZD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qIAAoIC,SAAA,EACjJiB,EAAAA,EAAAA,KAAA,OAAKlB,UAAU,2JACfkB,EAAAA,EAAAA,KAAA,OAAKlB,UAAU,6DAA4DC,UACzEF,EAAAA,EAAAA,MAACoD,EAAAA,EAAOC,IAAG,CACTC,QAAS,CAAER,QAAS,EAAGY,GAAI,IAC3BF,QAAS,CAAEV,QAAS,EAAGY,EAAG,GAC1BT,WAAY,CAAEC,SAAU,IACxBjD,UAAU,WAAUC,SAAA,EAEpBF,EAAAA,EAAAA,MAAA,MAAIC,UAAU,sCAAqCC,SAAA,CAAC,kBAAciB,EAAAA,EAAAA,KAAA,SAAM,uBACxEA,EAAAA,EAAAA,KAAA,KAAGlB,UAAU,6BAA4BC,SAAC,6EAMhDiB,EAAAA,EAAAA,KAAA,OAAKlB,UAAU,8DAA6DC,UAC1EF,EAAAA,EAAAA,MAACoD,EAAAA,EAAOC,IAAG,CACTM,SAhDkB,CACxBd,OAAQ,CAAEC,QAAS,EAAGC,EAAG,IACzBC,QAAS,CACPF,QAAS,EACTC,EAAG,EACHE,WAAY,CAAEC,SAAU,GAAKC,KAAM,UAAWS,KAAM,iBAAkBC,gBAAiB,OA4CnFP,QAAQ,SACRE,QAAQ,UACRvD,UAAU,2MAA0MC,SAAA,EAGpNiB,EAAAA,EAAAA,KAACiC,EAAAA,EAAOC,IAAG,CAACM,SAAUf,EAAc3C,UAAU,mBAAkBC,UAC9DF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oIAAmIC,SAAA,EAEhJiB,EAAAA,EAAAA,KAACiC,EAAAA,EAAOC,IAAG,CACTpD,UAAU,6EACVqD,QAAS,CAAER,QAAS,IACpBU,QAAS,CAAEV,QAAS,CAAC,GAAK,GAAK,KAC/BG,WAAY,CAAEC,SAAU,EAAGY,OAAQC,IAAUZ,KAAM,gBAErDhC,EAAAA,EAAAA,KAAA,OAAK6C,IAAI,aAAaC,IAAI,QAAQhE,UAAU,4CAGhDD,EAAAA,EAAAA,MAACoD,EAAAA,EAAOC,IAAG,CAACM,SAAUf,EAAc3C,UAAU,mBAAkBC,SAAA,EAC9DiB,EAAAA,EAAAA,KAAA,MAAIlB,UAAU,+DAA8DC,SAAC,6BAC7EiB,EAAAA,EAAAA,KAAA,KAAGlB,UAAU,wCAAuCC,SAAC,uEAGvDiB,EAAAA,EAAAA,KAACiC,EAAAA,EAAOC,IAAG,CAACM,SAAUf,EAAa1C,UACjCiB,EAAAA,EAAAA,KAAC1D,EAAQ,OAIXuC,EAAAA,EAAAA,MAACoD,EAAAA,EAAOC,IAAG,CAACM,SAAUf,EAAc3C,UAAU,+BAA8BC,SAAA,EAC1EiB,EAAAA,EAAAA,KAAA,OAAKlB,UAAU,iGACfkB,EAAAA,EAAAA,KAAA,OAAKlB,UAAU,0DAAyDC,SAAC,kBACzEiB,EAAAA,EAAAA,KAAA,OAAKlB,UAAU,2G","sources":["components/OTPLogin.jsx","pages/Login.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { toast } from 'react-hot-toast';\n\nconst OTPLogin = () => {\n  const [step, setStep] = useState('phone'); // 'phone' or 'otp'\n  const [phoneNumber, setPhoneNumber] = useState('');\n  const [otp, setOtp] = useState('');\n  const [displayName, setDisplayName] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [confirmationResult, setConfirmationResult] = useState(null);\n  const [countdown, setCountdown] = useState(0);\n  \n  const { sendOTP, verifyOTP, isAuthenticated, provider } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  // Redirect if already authenticated\n  useEffect(() => {\n    if (isAuthenticated) {\n      const from = location.state?.from?.pathname || '/';\n      navigate(from, { replace: true });\n    }\n  }, [isAuthenticated, navigate, location]);\n\n  // Cleanup reCAPTCHA on component unmount\n  useEffect(() => {\n    return () => {\n      // Clean up any existing reCAPTCHA containers\n      const container = document.getElementById('recaptcha-container');\n      if (container) {\n        container.innerHTML = '';\n      }\n    };\n  }, []);\n\n  // Countdown timer for resend OTP\n  useEffect(() => {\n    let timer;\n    if (countdown > 0) {\n      timer = setTimeout(() => setCountdown(countdown - 1), 1000);\n    }\n    return () => clearTimeout(timer);\n  }, [countdown]);\n\n  const handleSendOTP = async (e) => {\n    e.preventDefault();\n    if (!displayName || displayName.trim().length < 2) {\n      toast.error('Please enter your name');\n      return;\n    }\n    const uiDigits = phoneNumber.replace(/\\D/g, '');\n    if (!uiDigits || uiDigits.length !== 10) {\n      toast.error('Please enter a valid phone number');\n      return;\n    }\n    setLoading(true);\n    try {\n      // Persist name for post-login use\n      localStorage.setItem('pendingDisplayName', displayName.trim());\n      // Always pass E.164 to the service regardless of UI formatting\n      const digits = uiDigits; // already validated to be exactly 10\n      const e164 = `+91${digits}`;\n      const result = await sendOTP(e164);\n      if (result.success) {\n        // Firebase returns confirmationResult; Supabase does not require it\n        if (provider === 'firebase') {\n          setConfirmationResult(result.confirmationResult);\n        } else {\n          setConfirmationResult(null);\n        }\n        setStep('otp');\n        setCountdown(60);\n        toast.success('OTP sent successfully!');\n      } else {\n        toast.error(result.error || 'Failed to send OTP');\n      }\n    } catch (error) {\n      console.error('Error sending OTP:', error);\n      toast.error('Failed to send OTP. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleVerifyOTP = async (e) => {\n    e.preventDefault();\n    if (!otp || otp.length !== 6) {\n      toast.error('Please enter a valid 6-digit OTP');\n      return;\n    }\n    setLoading(true);\n    try {\n      // For Supabase, pass phone number; for Firebase, pass confirmationResult\n      // Always pass E.164 to the service regardless of UI formatting\n      const digits = phoneNumber.replace(/\\D/g, '');\n      if (provider === 'supabase' && digits.length !== 10) {\n        toast.error('Please enter a valid 10-digit phone number');\n        setLoading(false);\n        return;\n      }\n      const e164 = `+91${digits}`;\n      const result = provider === 'supabase'\n        ? await verifyOTP(e164, otp, { displayName })\n        : await verifyOTP(confirmationResult, otp);\n      if (result.success) {\n        // Name was captured earlier; keep it available for profile completion\n        const name = localStorage.getItem('pendingDisplayName');\n        if (name) {\n          // Optionally, we could save the name to profile here if user object is available\n          // Defer to profile page to finalize; keep name cached\n          localStorage.removeItem('pendingDisplayName');\n          localStorage.setItem('displayName', name);\n        }\n        toast.success('Login successful!');\n        const from = location.state?.from?.pathname || '/';\n        navigate(from, { replace: true });\n      } else {\n        toast.error(result.error || 'Invalid OTP');\n        setOtp('');\n      }\n    } catch (error) {\n      console.error('Error verifying OTP:', error);\n      toast.error('Failed to verify OTP. Please try again.');\n      setOtp('');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleResendOTP = async () => {\n    if (countdown > 0) return;\n    setLoading(true);\n    try {\n      // Always pass E.164 to the service regardless of UI formatting\n      const digits = phoneNumber.replace(/\\D/g, '');\n      if (digits.length !== 10) {\n        toast.error('Please enter a valid 10-digit phone number');\n        setLoading(false);\n        return;\n      }\n      const e164 = `+91${digits}`;\n      const result = await sendOTP(e164);\n      if (result.success) {\n        if (provider === 'firebase') {\n          setConfirmationResult(result.confirmationResult);\n        } else {\n          setConfirmationResult(null);\n        }\n        setCountdown(60);\n        toast.success('OTP resent successfully!');\n      } else {\n        toast.error(result.error || 'Failed to resend OTP');\n      }\n    } catch (error) {\n      console.error('Error resending OTP:', error);\n      toast.error('Failed to resend OTP. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleBack = () => {\n    setStep('phone');\n    setOtp('');\n    setConfirmationResult(null);\n    setCountdown(0);\n  };\n\n  const formatPhoneNumber = (value) => {\n    const digits = value.replace(/\\D/g, '').slice(0, 10);\n    if (digits.length >= 6) {\n      return `${digits.slice(0,3)}-${digits.slice(3,6)}-${digits.slice(6)}`;\n    } else if (digits.length >= 3) {\n      return `${digits.slice(0,3)}-${digits.slice(3)}`;\n    }\n    return digits;\n  };\n\n  const handlePhoneChange = (e) => {\n    const formatted = formatPhoneNumber(e.target.value);\n    setPhoneNumber(formatted);\n  };\n\n  return (\n    <div className=\"w-full font-sans\">\n      {/* Form */}\n      {step === 'phone' ? (\n        <form onSubmit={handleSendOTP} className=\"space-y-4\">\n          {/* Name */}\n          <div>\n            <label className=\"block text-sm md:text-base font-medium text-gray-700 mb-1\">\n              Your Name\n            </label>\n            <div className=\"relative\">\n              <span className=\"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400\">üë§</span>\n              <input\n                type=\"text\"\n                value={displayName}\n                onChange={(e) => setDisplayName(e.target.value)}\n                placeholder=\"e.g., Aman Kumar\"\n                className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-300 focus:border-transparent transition\"\n                required\n              />\n            </div>\n          </div>\n          {/* Phone */}\n          <div>\n            <label className=\"block text-sm md:text-base font-medium text-gray-700 mb-1\">\n              Phone Number\n            </label>\n            <div className=\"relative\">\n              <div className=\"absolute inset-y-0 left-0 flex items-center pl-3 text-orange-500 font-semibold\">+91</div>\n              <span className=\"pointer-events-none absolute inset-y-0 left-12 flex items-center text-gray-400\">üì±</span>\n              <input\n                type=\"tel\"\n                value={phoneNumber}\n                onChange={handlePhoneChange}\n                placeholder=\"XXXXXXXXXX\"\n                className=\"w-full pl-20 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-300 focus:border-transparent transition\"\n                required\n              />\n            </div>\n            <p className=\"text-xs text-gray-400 mt-1\">Standard rates may apply.</p>\n          </div>\n          {/* reCAPTCHA Container - Only show for Firebase */}\n          {provider === 'firebase' && (\n            <div className=\"flex justify-center my-4\">\n              <div \n                id=\"recaptcha-container\" \n                className=\"flex justify-center items-center\"\n                style={{ transform: 'scale(0.9)', transformOrigin: 'center' }}\n              ></div>\n            </div>\n          )}\n          \n          {/* Supabase Info - Show helpful message for Supabase */}\n          {provider === 'supabase' && (\n            <div className=\"flex justify-center\">\n              <div className=\"text-sm text-gray-600 bg-green-50 px-4 py-2 rounded-lg border border-green-200\">\n                ‚úÖ Using fast, reliable SMS delivery from Dabba Bot. No reCAPTCHA needed.\n              </div>\n            </div>\n          )}\n          \n          {/* Send OTP Button */}\n          <button\n            type=\"submit\"\n            disabled={loading || phoneNumber.replace(/\\D/g, '').length < 10 || displayName.trim().length < 2}\n            className=\"w-full bg-orange-500 hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white py-3 px-6 rounded-xl font-semibold transition\"\n          >\n            {loading ? 'Sending...' : 'Send OTP'}\n          </button>\n        </form>\n      ) : (\n        <form onSubmit={handleVerifyOTP} className=\"space-y-4\">\n          {/* OTP Input */}\n          <div>\n            <label className=\"block text-sm md:text-base font-medium text-gray-700 mb-1\">\n              Enter OTP\n            </label>\n            <div className=\"relative\">\n              <span className=\"pointer-events-none absolute inset-y-0 left-3 flex items-center text-gray-400\">üîí</span>\n              <input\n                type=\"text\"\n                value={otp}\n                onChange={(e) => setOtp(e.target.value.replace(/\\D/g, '').slice(0, 6))}\n                placeholder=\"000000\"\n                className=\"w-full pl-10 pr-4 text-center text-xl md:text-2xl font-semibold tracking-widest border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-300 transition px-4 py-3\"\n                maxLength={6}\n                required\n              />\n            </div>\n          </div>\n          {/* Buttons: Back & Resend */}\n          <div className=\"flex flex-col md:flex-row md:justify-between md:items-center gap-3 md:gap-0\">\n            <button\n              type=\"button\"\n              onClick={handleBack}\n              className=\"text-orange-500 hover:text-orange-700 font-medium text-sm md:text-base transition\"\n            >\n              ‚Üê Change Number\n            </button>\n            <button\n              type=\"button\"\n              onClick={handleResendOTP}\n              disabled={countdown > 0 || loading}\n              className={`text-orange-500 hover:text-orange-700 font-medium text-sm md:text-base transition disabled:opacity-50 disabled:cursor-not-allowed`}\n            >\n              {countdown > 0 ? `Resend in ${countdown}s` : 'Resend OTP'}\n            </button>\n          </div>\n          {/* Verify Button */}\n          <button\n            type=\"submit\"\n            disabled={loading || otp.length !== 6}\n            className=\"w-full bg-orange-500 hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white py-3 px-6 rounded-xl font-semibold transition\"\n          >\n            {loading ? 'Verifying...' : 'Verify OTP'}\n          </button>\n        </form>\n      )}\n\n      {/* Terms & Privacy */}\n      <div className=\"mt-6 text-center text-sm md:text-base text-gray-500\">\n        <p>\n          By continuing, you agree to our{' '}\n          <button className=\"text-orange-500 hover:text-orange-700 underline bg-transparent border-none cursor-pointer\">\n            Terms of Service\n          </button>{' '}\n          and{' '}\n          <button className=\"text-orange-500 hover:text-orange-700 underline bg-transparent border-none cursor-pointer\">\n            Privacy Policy\n          </button>\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default OTPLogin;","import React from 'react';\nimport { motion } from 'framer-motion';\nimport OTPLogin from '../components/OTPLogin';\n\nconst Login = () => {\n  // Motion variants for staggered, polished animations\n  const containerVariants = {\n    hidden: { opacity: 0, y: 20 },\n    visible: {\n      opacity: 1,\n      y: 0,\n      transition: { duration: 0.6, ease: 'easeOut', when: 'beforeChildren', staggerChildren: 0.08 },\n    },\n  };\n  const itemVariants = {\n    hidden: { opacity: 0, y: 10 },\n    visible: { opacity: 1, y: 0, transition: { duration: 0.45, ease: 'easeOut' } },\n  };\n\n  return (\n    <div className=\"min-h-screen relative overflow-hidden flex flex-col md:flex-row bg-gradient-to-br from-orange-50 via-white to-rose-50 dark:from-gray-950 dark:via-gray-900 dark:to-black\">\n      {/* Decorative animated background blobs */}\n      <motion.div\n        initial={{ opacity: 0, scale: 0.9 }}\n        animate={{ opacity: 0.6, scale: 1 }}\n        transition={{ duration: 1 }}\n        className=\"pointer-events-none absolute -top-32 -left-32 h-96 w-96 rounded-full bg-gradient-to-br from-orange-200 to-rose-200 blur-3xl dark:from-orange-900/30 dark:to-rose-900/30\"\n      />\n      <motion.div\n        initial={{ opacity: 0, scale: 0.9 }}\n        animate={{ opacity: 0.5, scale: 1 }}\n        transition={{ duration: 1, delay: 0.15 }}\n        className=\"pointer-events-none absolute -bottom-32 -right-32 h-[28rem] w-[28rem] rounded-full bg-gradient-to-br from-rose-200 to-orange-200 blur-3xl dark:from-rose-900/30 dark:to-orange-900/30\"\n      />\n\n      {/* Left Side - Food Image */}\n      <div className=\"hidden md:flex md:w-1/2 bg-gradient-to-br from-orange-400 to-red-500 dark:from-orange-800 dark:to-red-900 relative overflow-hidden\">\n        <div className=\"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1544025162-d76694265947?q=80&w=1600&auto=format&fit=crop')] bg-cover bg-center opacity-25\"></div>\n        <div className=\"relative z-10 flex flex-col justify-center p-12 text-white\">\n          <motion.div\n            initial={{ opacity: 0, x: -50 }}\n            animate={{ opacity: 1, x: 0 }}\n            transition={{ duration: 0.6 }}\n            className=\"max-w-md\"\n          >\n            <h1 className=\"text-4xl font-bold mb-4 drop-shadow\">Taste of Home,<br />Delivered to You</h1>\n            <p className=\"text-lg mb-8 text-white/90\">Experience the warmth of homemade food, just like mom makes it.</p>\n          </motion.div>\n        </div>\n      </div>\n\n      {/* Right Side - Login Form */}\n      <div className=\"w-full md:w-1/2 flex items-center justify-center p-6 md:p-8\">\n        <motion.div\n          variants={containerVariants}\n          initial=\"hidden\"\n          animate=\"visible\"\n          className=\"w-full max-w-md bg-white/70 dark:bg-white/5 backdrop-blur rounded-3xl shadow-xl ring-1 ring-gray-200/60 dark:ring-white/10 p-6 md:p-8 transition transform md:hover:-translate-y-0.5 md:hover:shadow-2xl\"\n        >\n          {/* Logo + Tagline */}\n          <motion.div variants={itemVariants} className=\"text-center mb-6\">\n            <div className=\"relative mx-auto h-14 w-14 rounded-2xl bg-white flex items-center justify-center shadow-sm ring-1 ring-orange-100 overflow-hidden\">\n              {/* Subtle animated glow */}\n              <motion.div\n                className=\"absolute inset-0 rounded-2xl bg-gradient-to-tr from-orange-100 to-rose-100\"\n                initial={{ opacity: 0.3 }}\n                animate={{ opacity: [0.3, 0.6, 0.3] }}\n                transition={{ duration: 3, repeat: Infinity, ease: 'easeInOut' }}\n              />\n              <img src=\"/logo1.png\" alt=\"Dabba\" className=\"relative h-10 w-10 object-contain\" />\n            </div>\n          </motion.div>\n          <motion.div variants={itemVariants} className=\"text-center mb-6\">\n            <h2 className=\"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white\">Sign in to your account</h2>\n            <p className=\"text-gray-600 dark:text-gray-300 mt-2\">Welcome back! Continue with your mobile number to get started.</p>\n          </motion.div>\n\n          <motion.div variants={itemVariants}>\n            <OTPLogin />\n          </motion.div>\n\n          {/* Divider */}\n          <motion.div variants={itemVariants} className=\"mt-6 flex items-center gap-3\">\n            <div className=\"flex-1 h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent dark:via-white/10\" />\n            <div className=\"text-xs text-gray-400 dark:text-gray-500 tracking-wider\">SECURE LOGIN</div>\n            <div className=\"flex-1 h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent dark:via-white/10\" />\n          </motion.div>\n        </motion.div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;"],"names":["OTPLogin","step","setStep","useState","phoneNumber","setPhoneNumber","otp","setOtp","displayName","setDisplayName","loading","setLoading","confirmationResult","setConfirmationResult","countdown","setCountdown","sendOTP","verifyOTP","isAuthenticated","provider","useAuth","navigate","useNavigate","location","useLocation","useEffect","_location$state","_location$state$from","from","state","pathname","replace","container","document","getElementById","innerHTML","timer","setTimeout","clearTimeout","_jsxs","className","children","onSubmit","async","e","preventDefault","trim","length","toast","error","uiDigits","localStorage","setItem","e164","concat","result","success","console","_jsx","type","value","onChange","target","placeholder","required","formatted","digits","slice","formatPhoneNumber","id","style","transform","transformOrigin","disabled","_location$state2","_location$state2$from","name","getItem","removeItem","maxLength","onClick","handleBack","Login","itemVariants","hidden","opacity","y","visible","transition","duration","ease","motion","div","initial","scale","animate","delay","x","variants","when","staggerChildren","repeat","Infinity","src","alt"],"sourceRoot":""}