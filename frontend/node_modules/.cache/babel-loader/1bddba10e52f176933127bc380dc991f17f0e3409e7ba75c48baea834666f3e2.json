{"ast":null,"code":"import { signInWithPhoneNumber, RecaptchaVerifier, signOut, updateProfile, onAuthStateChanged } from 'firebase/auth';\nimport { doc, setDoc, getDoc, updateDoc } from 'firebase/firestore';\nimport { auth, db } from '../firebase/config';\nclass AuthService {\n  constructor() {\n    this.recaptchaVerifier = null;\n  }\n\n  // Initialize reCAPTCHA verifier\n  initializeRecaptcha(containerId = 'recaptcha-container') {\n    // Always create a fresh verifier to avoid stale tokens\n    this.cleanupRecaptcha();\n\n    // Check if container exists in DOM - don't create it if missing\n    try {\n      if (typeof window !== 'undefined' && typeof document !== 'undefined') {\n        const container = document.getElementById(containerId);\n        if (!container) {\n          console.warn(`reCAPTCHA container '${containerId}' not found in DOM. Make sure it exists in your component.`);\n          throw new Error(`reCAPTCHA container '${containerId}' not found`);\n        }\n      }\n    } catch (error) {\n      console.warn('DOM container check failed:', error);\n      throw error;\n    }\n    try {\n      // Firebase v9 modular API: RecaptchaVerifier(auth, containerId, parameters)\n      this.recaptchaVerifier = new RecaptchaVerifier(auth,\n      // First parameter: auth instance\n      containerId,\n      // Second parameter: container ID\n      {\n        size: 'normal',\n        // Keep visible for Identity Platform debugging\n        theme: 'light',\n        callback: response => {\n          console.log('reCAPTCHA solved, response length:', response === null || response === void 0 ? void 0 : response.length);\n        },\n        'expired-callback': () => {\n          console.log('reCAPTCHA expired, recreating...');\n          this.cleanupRecaptcha();\n        },\n        'error-callback': error => {\n          console.error('reCAPTCHA error:', error);\n        }\n      });\n      console.log('RecaptchaVerifier created successfully for Identity Platform');\n      return this.recaptchaVerifier;\n    } catch (error) {\n      console.error('Failed to create RecaptchaVerifier:', error);\n      throw error;\n    }\n  }\n\n  // Cleanup reCAPTCHA\n  cleanupRecaptcha() {\n    if (this.recaptchaVerifier && typeof this.recaptchaVerifier.clear === 'function') {\n      try {\n        this.recaptchaVerifier.clear();\n      } catch (_) {\n        // ignore\n      }\n    }\n    this.recaptchaVerifier = null;\n  }\n\n  // Send OTP to phone number\n  async sendOTP(phoneNumber) {\n    try {\n      // Ensure phone number is in E.164 format\n      const digitsOnly = (phoneNumber || '').replace(/\\D/g, '');\n      let formattedPhone = '';\n      if (digitsOnly.startsWith('91')) {\n        formattedPhone = `+${digitsOnly}`;\n      } else if (phoneNumber.startsWith('+')) {\n        formattedPhone = `+${digitsOnly}`;\n      } else {\n        formattedPhone = `+91${digitsOnly}`;\n      }\n      console.log('Identity Platform: Attempting to send OTP to:', formattedPhone);\n\n      // Create fresh reCAPTCHA verifier with explicit render\n      const recaptchaVerifier = this.initializeRecaptcha();\n\n      // Wait for reCAPTCHA to fully render before proceeding\n      try {\n        await recaptchaVerifier.render();\n        console.log('reCAPTCHA rendered successfully');\n      } catch (renderError) {\n        console.warn('reCAPTCHA render warning:', renderError);\n      }\n\n      // Add a small delay to ensure reCAPTCHA is ready\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      console.log('Identity Platform: RecaptchaVerifier ready, attempting signInWithPhoneNumber...');\n      const confirmationResult = await signInWithPhoneNumber(auth, formattedPhone, recaptchaVerifier);\n      console.log('Identity Platform: OTP sent successfully');\n      return {\n        success: true,\n        confirmationResult,\n        message: 'OTP sent successfully'\n      };\n    } catch (error) {\n      console.error('Identity Platform Error sending OTP:', {\n        code: error === null || error === void 0 ? void 0 : error.code,\n        message: error === null || error === void 0 ? void 0 : error.message,\n        data: error === null || error === void 0 ? void 0 : error.customData,\n        stack: error === null || error === void 0 ? void 0 : error.stack\n      });\n\n      // Provide more specific error messages for Identity Platform\n      let userMessage = 'Failed to send OTP';\n      if ((error === null || error === void 0 ? void 0 : error.code) === 'auth/invalid-app-credential') {\n        userMessage = 'Identity Platform: App credentials invalid. This may be due to reCAPTCHA configuration or project settings.';\n      } else if ((error === null || error === void 0 ? void 0 : error.code) === 'auth/captcha-check-failed') {\n        userMessage = 'reCAPTCHA verification failed. Please complete the reCAPTCHA and try again.';\n      } else if ((error === null || error === void 0 ? void 0 : error.code) === 'auth/invalid-phone-number') {\n        userMessage = 'Invalid phone number format. Please check and try again.';\n      } else if ((error === null || error === void 0 ? void 0 : error.code) === 'auth/quota-exceeded') {\n        userMessage = 'SMS quota exceeded. Please try again later.';\n      } else if ((error === null || error === void 0 ? void 0 : error.code) === 'auth/too-many-requests') {\n        userMessage = 'ðŸŽ‰ Phone auth is working! Rate limit reached - please wait 15-30 minutes or try a different phone number.';\n      }\n      return {\n        success: false,\n        error: userMessage,\n        errorCode: error === null || error === void 0 ? void 0 : error.code\n      };\n    }\n  }\n\n  // Verify OTP and complete login\n  async verifyOTP(confirmationResult, otp) {\n    try {\n      const result = await confirmationResult.confirm(otp);\n      const user = result.user;\n\n      // Create/update profile\n      await this.createOrUpdateUserProfile(user);\n      return {\n        success: true,\n        user,\n        message: 'Login successful'\n      };\n    } catch (error) {\n      console.error('Error verifying OTP:', error);\n      return {\n        success: false,\n        error: 'Invalid OTP. Please try again.'\n      };\n    }\n  }\n\n  // Create or update user profile in Firestore\n  async createOrUpdateUserProfile(user, additionalData = {}) {\n    try {\n      const userRef = doc(db, 'users', user.uid);\n      const userSnap = await getDoc(userRef);\n      const userData = {\n        uid: user.uid,\n        phoneNumber: user.phoneNumber,\n        lastLogin: new Date(),\n        updatedAt: new Date(),\n        ...additionalData\n      };\n      if (!userSnap.exists()) {\n        // Create profile\n        userData.createdAt = new Date();\n        userData.name = additionalData.name || '';\n        userData.email = additionalData.email || '';\n        userData.addresses = [];\n        userData.orderHistory = [];\n        await setDoc(userRef, userData);\n      } else {\n        // Update profile\n        await updateDoc(userRef, userData);\n      }\n      return userData;\n    } catch (error) {\n      console.error('Error creating/updating user profile:', error);\n      throw error;\n    }\n  }\n\n  // Get user profile\n  async getUserProfile(userId) {\n    try {\n      const userRef = doc(db, 'users', userId);\n      const userSnap = await getDoc(userRef);\n      return userSnap.exists() ? userSnap.data() : null;\n    } catch (error) {\n      console.error('Error getting user profile:', error);\n      throw error;\n    }\n  }\n\n  // Update profile\n  async updateUserProfile(userId, profileData) {\n    try {\n      const userRef = doc(db, 'users', userId);\n      const updateData = {\n        ...profileData,\n        updatedAt: new Date()\n      };\n      await updateDoc(userRef, updateData);\n      if (profileData.name && auth.currentUser) {\n        await updateProfile(auth.currentUser, {\n          displayName: profileData.name\n        });\n      }\n      return {\n        success: true,\n        message: 'Profile updated successfully'\n      };\n    } catch (error) {\n      console.error('Error updating user profile:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  // Add address\n  async addAddress(userId, address) {\n    try {\n      const userRef = doc(db, 'users', userId);\n      const userSnap = await getDoc(userRef);\n      if (userSnap.exists()) {\n        const userData = userSnap.data();\n        const addresses = userData.addresses || [];\n        const newAddress = {\n          id: Date.now().toString(),\n          ...address,\n          createdAt: new Date()\n        };\n        addresses.push(newAddress);\n        await updateDoc(userRef, {\n          addresses,\n          updatedAt: new Date()\n        });\n        return {\n          success: true,\n          address: newAddress,\n          message: 'Address added successfully'\n        };\n      }\n    } catch (error) {\n      console.error('Error adding address:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  // Logout\n  async logout() {\n    try {\n      await signOut(auth);\n      this.recaptchaVerifier = null;\n      return {\n        success: true,\n        message: 'Logged out successfully'\n      };\n    } catch (error) {\n      console.error('Error logging out:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  // Auth state listener\n  onAuthStateChanged(callback) {\n    return onAuthStateChanged(auth, callback);\n  }\n\n  // Full cleanup\n  cleanup() {\n    if (this.recaptchaVerifier) {\n      if (typeof this.recaptchaVerifier.clear === 'function') {\n        this.recaptchaVerifier.clear();\n      }\n      this.recaptchaVerifier = null;\n    }\n  }\n}\nconst authService = new AuthService();\nexport default authService;","map":{"version":3,"names":["signInWithPhoneNumber","RecaptchaVerifier","signOut","updateProfile","onAuthStateChanged","doc","setDoc","getDoc","updateDoc","auth","db","AuthService","constructor","recaptchaVerifier","initializeRecaptcha","containerId","cleanupRecaptcha","window","document","container","getElementById","console","warn","Error","error","size","theme","callback","response","log","length","expired-callback","clear","_","sendOTP","phoneNumber","digitsOnly","replace","formattedPhone","startsWith","render","renderError","Promise","resolve","setTimeout","confirmationResult","success","message","code","data","customData","stack","userMessage","errorCode","verifyOTP","otp","result","confirm","user","createOrUpdateUserProfile","additionalData","userRef","uid","userSnap","userData","lastLogin","Date","updatedAt","exists","createdAt","name","email","addresses","orderHistory","getUserProfile","userId","updateUserProfile","profileData","updateData","currentUser","displayName","addAddress","address","newAddress","id","now","toString","push","logout","cleanup","authService"],"sources":["/Users/chandrilmallick/Downloads/web-projects/dabba-app/frontend/src/services/authService.js"],"sourcesContent":["import {\n  signInWithPhoneNumber,\n  RecaptchaVerifier,\n  signOut,\n  updateProfile,\n  onAuthStateChanged\n} from 'firebase/auth';\nimport { doc, setDoc, getDoc, updateDoc } from 'firebase/firestore';\nimport { auth, db } from '../firebase/config';\n\nclass AuthService {\n  constructor() {\n    this.recaptchaVerifier = null;\n  }\n\n  // Initialize reCAPTCHA verifier\n  initializeRecaptcha(containerId = 'recaptcha-container') {\n    // Always create a fresh verifier to avoid stale tokens\n    this.cleanupRecaptcha();\n    \n    // Check if container exists in DOM - don't create it if missing\n    try {\n      if (typeof window !== 'undefined' && typeof document !== 'undefined') {\n        const container = document.getElementById(containerId);\n        if (!container) {\n          console.warn(`reCAPTCHA container '${containerId}' not found in DOM. Make sure it exists in your component.`);\n          throw new Error(`reCAPTCHA container '${containerId}' not found`);\n        }\n      }\n    } catch (error) {\n      console.warn('DOM container check failed:', error);\n      throw error;\n    }\n\n    try {\n      // Firebase v9 modular API: RecaptchaVerifier(auth, containerId, parameters)\n      this.recaptchaVerifier = new RecaptchaVerifier(\n        auth, // First parameter: auth instance\n        containerId, // Second parameter: container ID\n        {\n          size: 'normal', // Keep visible for Identity Platform debugging\n          theme: 'light',\n          callback: (response) => {\n            console.log('reCAPTCHA solved, response length:', response?.length);\n          },\n          'expired-callback': () => {\n            console.log('reCAPTCHA expired, recreating...');\n            this.cleanupRecaptcha();\n          },\n          'error-callback': (error) => {\n            console.error('reCAPTCHA error:', error);\n          }\n        }\n      );\n\n      console.log('RecaptchaVerifier created successfully for Identity Platform');\n      return this.recaptchaVerifier;\n    } catch (error) {\n      console.error('Failed to create RecaptchaVerifier:', error);\n      throw error;\n    }\n  }\n\n  // Cleanup reCAPTCHA\n  cleanupRecaptcha() {\n    if (this.recaptchaVerifier && typeof this.recaptchaVerifier.clear === 'function') {\n      try {\n        this.recaptchaVerifier.clear();\n      } catch (_) {\n        // ignore\n      }\n    }\n    this.recaptchaVerifier = null;\n  }\n\n  // Send OTP to phone number\n  async sendOTP(phoneNumber) {\n    try {\n      // Ensure phone number is in E.164 format\n      const digitsOnly = (phoneNumber || '').replace(/\\D/g, '');\n      let formattedPhone = '';\n      if (digitsOnly.startsWith('91')) {\n        formattedPhone = `+${digitsOnly}`;\n      } else if (phoneNumber.startsWith('+')) {\n        formattedPhone = `+${digitsOnly}`;\n      } else {\n        formattedPhone = `+91${digitsOnly}`;\n      }\n\n      console.log('Identity Platform: Attempting to send OTP to:', formattedPhone);\n\n      // Create fresh reCAPTCHA verifier with explicit render\n      const recaptchaVerifier = this.initializeRecaptcha();\n      \n      // Wait for reCAPTCHA to fully render before proceeding\n      try {\n        await recaptchaVerifier.render();\n        console.log('reCAPTCHA rendered successfully');\n      } catch (renderError) {\n        console.warn('reCAPTCHA render warning:', renderError);\n      }\n\n      // Add a small delay to ensure reCAPTCHA is ready\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      console.log('Identity Platform: RecaptchaVerifier ready, attempting signInWithPhoneNumber...');\n      const confirmationResult = await signInWithPhoneNumber(auth, formattedPhone, recaptchaVerifier);\n\n      console.log('Identity Platform: OTP sent successfully');\n      return {\n        success: true,\n        confirmationResult,\n        message: 'OTP sent successfully'\n      };\n    } catch (error) {\n      console.error('Identity Platform Error sending OTP:', {\n        code: error?.code,\n        message: error?.message,\n        data: error?.customData,\n        stack: error?.stack\n      });\n      \n      // Provide more specific error messages for Identity Platform\n      let userMessage = 'Failed to send OTP';\n      if (error?.code === 'auth/invalid-app-credential') {\n        userMessage = 'Identity Platform: App credentials invalid. This may be due to reCAPTCHA configuration or project settings.';\n      } else if (error?.code === 'auth/captcha-check-failed') {\n        userMessage = 'reCAPTCHA verification failed. Please complete the reCAPTCHA and try again.';\n      } else if (error?.code === 'auth/invalid-phone-number') {\n        userMessage = 'Invalid phone number format. Please check and try again.';\n      } else if (error?.code === 'auth/quota-exceeded') {\n        userMessage = 'SMS quota exceeded. Please try again later.';\n      } else if (error?.code === 'auth/too-many-requests') {\n        userMessage = 'ðŸŽ‰ Phone auth is working! Rate limit reached - please wait 15-30 minutes or try a different phone number.';\n      }\n\n      return {\n        success: false,\n        error: userMessage,\n        errorCode: error?.code\n      };\n    }\n  }\n\n  // Verify OTP and complete login\n  async verifyOTP(confirmationResult, otp) {\n    try {\n      const result = await confirmationResult.confirm(otp);\n      const user = result.user;\n\n      // Create/update profile\n      await this.createOrUpdateUserProfile(user);\n\n      return {\n        success: true,\n        user,\n        message: 'Login successful'\n      };\n    } catch (error) {\n      console.error('Error verifying OTP:', error);\n      return {\n        success: false,\n        error: 'Invalid OTP. Please try again.'\n      };\n    }\n  }\n\n  // Create or update user profile in Firestore\n  async createOrUpdateUserProfile(user, additionalData = {}) {\n    try {\n      const userRef = doc(db, 'users', user.uid);\n      const userSnap = await getDoc(userRef);\n\n      const userData = {\n        uid: user.uid,\n        phoneNumber: user.phoneNumber,\n        lastLogin: new Date(),\n        updatedAt: new Date(),\n        ...additionalData\n      };\n\n      if (!userSnap.exists()) {\n        // Create profile\n        userData.createdAt = new Date();\n        userData.name = additionalData.name || '';\n        userData.email = additionalData.email || '';\n        userData.addresses = [];\n        userData.orderHistory = [];\n\n        await setDoc(userRef, userData);\n      } else {\n        // Update profile\n        await updateDoc(userRef, userData);\n      }\n\n      return userData;\n    } catch (error) {\n      console.error('Error creating/updating user profile:', error);\n      throw error;\n    }\n  }\n\n  // Get user profile\n  async getUserProfile(userId) {\n    try {\n      const userRef = doc(db, 'users', userId);\n      const userSnap = await getDoc(userRef);\n\n      return userSnap.exists() ? userSnap.data() : null;\n    } catch (error) {\n      console.error('Error getting user profile:', error);\n      throw error;\n    }\n  }\n\n  // Update profile\n  async updateUserProfile(userId, profileData) {\n    try {\n      const userRef = doc(db, 'users', userId);\n      const updateData = {\n        ...profileData,\n        updatedAt: new Date()\n      };\n\n      await updateDoc(userRef, updateData);\n\n      if (profileData.name && auth.currentUser) {\n        await updateProfile(auth.currentUser, {\n          displayName: profileData.name\n        });\n      }\n\n      return {\n        success: true,\n        message: 'Profile updated successfully'\n      };\n    } catch (error) {\n      console.error('Error updating user profile:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  // Add address\n  async addAddress(userId, address) {\n    try {\n      const userRef = doc(db, 'users', userId);\n      const userSnap = await getDoc(userRef);\n\n      if (userSnap.exists()) {\n        const userData = userSnap.data();\n        const addresses = userData.addresses || [];\n\n        const newAddress = {\n          id: Date.now().toString(),\n          ...address,\n          createdAt: new Date()\n        };\n\n        addresses.push(newAddress);\n\n        await updateDoc(userRef, {\n          addresses,\n          updatedAt: new Date()\n        });\n\n        return {\n          success: true,\n          address: newAddress,\n          message: 'Address added successfully'\n        };\n      }\n    } catch (error) {\n      console.error('Error adding address:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  // Logout\n  async logout() {\n    try {\n      await signOut(auth);\n      this.recaptchaVerifier = null;\n      return {\n        success: true,\n        message: 'Logged out successfully'\n      };\n    } catch (error) {\n      console.error('Error logging out:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  // Auth state listener\n  onAuthStateChanged(callback) {\n    return onAuthStateChanged(auth, callback);\n  }\n\n  // Full cleanup\n  cleanup() {\n    if (this.recaptchaVerifier) {\n      if (typeof this.recaptchaVerifier.clear === 'function') {\n        this.recaptchaVerifier.clear();\n      }\n      this.recaptchaVerifier = null;\n    }\n  }\n}\n\nconst authService = new AuthService();\nexport default authService;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}