{"ast":null,"code":"import _objectSpread from\"/Users/chandrilmallick/Downloads/web-projects/dabba-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{signInWithPhoneNumber,RecaptchaVerifier,signOut,updateProfile,onAuthStateChanged}from'firebase/auth';import{doc,setDoc,getDoc,updateDoc}from'firebase/firestore';import{auth,db}from'../firebase/config';class AuthService{constructor(){this.recaptchaVerifier=null;}// Initialize reCAPTCHA verifier\ninitializeRecaptcha(){let containerId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'recaptcha-container';// Always create a fresh verifier to avoid stale tokens\nthis.cleanupRecaptcha();// Check if container exists in DOM - don't create it if missing\ntry{if(typeof window!=='undefined'&&typeof document!=='undefined'){const container=document.getElementById(containerId);if(!container){console.warn(\"reCAPTCHA container '\".concat(containerId,\"' not found in DOM. Make sure it exists in your component.\"));throw new Error(\"reCAPTCHA container '\".concat(containerId,\"' not found\"));}}}catch(error){console.warn('DOM container check failed:',error);throw error;}try{// Firebase v9 modular API: RecaptchaVerifier(auth, containerId, parameters)\nthis.recaptchaVerifier=new RecaptchaVerifier(auth,// First parameter: auth instance\ncontainerId,// Second parameter: container ID\n{size:'normal',// Keep visible for Identity Platform debugging\ntheme:'light',callback:response=>{console.log('reCAPTCHA solved, response length:',response===null||response===void 0?void 0:response.length);},'expired-callback':()=>{console.log('reCAPTCHA expired, recreating...');this.cleanupRecaptcha();},'error-callback':error=>{console.error('reCAPTCHA error:',error);}});console.log('RecaptchaVerifier created successfully for Identity Platform');return this.recaptchaVerifier;}catch(error){console.error('Failed to create RecaptchaVerifier:',error);throw error;}}// Cleanup reCAPTCHA\ncleanupRecaptcha(){if(this.recaptchaVerifier&&typeof this.recaptchaVerifier.clear==='function'){try{this.recaptchaVerifier.clear();}catch(_){// ignore\n}}this.recaptchaVerifier=null;}// Send OTP to phone number\nasync sendOTP(phoneNumber){try{// Ensure phone number is in E.164 format\nconst digitsOnly=(phoneNumber||'').replace(/\\D/g,'');let formattedPhone='';if(digitsOnly.startsWith('91')){formattedPhone=\"+\".concat(digitsOnly);}else if(phoneNumber.startsWith('+')){formattedPhone=\"+\".concat(digitsOnly);}else{formattedPhone=\"+91\".concat(digitsOnly);}console.log('Identity Platform: Attempting to send OTP to:',formattedPhone);// Create fresh reCAPTCHA verifier with explicit render\nconst recaptchaVerifier=this.initializeRecaptcha();// Wait for reCAPTCHA to fully render before proceeding\ntry{await recaptchaVerifier.render();console.log('reCAPTCHA rendered successfully');}catch(renderError){console.warn('reCAPTCHA render warning:',renderError);}// Add a small delay to ensure reCAPTCHA is ready\nawait new Promise(resolve=>setTimeout(resolve,1000));console.log('Identity Platform: RecaptchaVerifier ready, attempting signInWithPhoneNumber...');const confirmationResult=await signInWithPhoneNumber(auth,formattedPhone,recaptchaVerifier);console.log('Identity Platform: OTP sent successfully');return{success:true,confirmationResult,message:'OTP sent successfully'};}catch(error){console.error('Identity Platform Error sending OTP:',{code:error===null||error===void 0?void 0:error.code,message:error===null||error===void 0?void 0:error.message,data:error===null||error===void 0?void 0:error.customData,stack:error===null||error===void 0?void 0:error.stack});// Provide more specific error messages for Identity Platform\nlet userMessage='Failed to send OTP';if((error===null||error===void 0?void 0:error.code)==='auth/invalid-app-credential'){userMessage='Identity Platform: App credentials invalid. This may be due to reCAPTCHA configuration or project settings.';}else if((error===null||error===void 0?void 0:error.code)==='auth/captcha-check-failed'){userMessage='reCAPTCHA verification failed. Please complete the reCAPTCHA and try again.';}else if((error===null||error===void 0?void 0:error.code)==='auth/invalid-phone-number'){userMessage='Invalid phone number format. Please check and try again.';}else if((error===null||error===void 0?void 0:error.code)==='auth/quota-exceeded'){userMessage='SMS quota exceeded. Please try again later.';}else if((error===null||error===void 0?void 0:error.code)==='auth/too-many-requests'){userMessage='ðŸŽ‰ Phone auth is working! Rate limit reached - please wait 15-30 minutes or try a different phone number.';}return{success:false,error:userMessage,errorCode:error===null||error===void 0?void 0:error.code};}}// Verify OTP and complete login\nasync verifyOTP(confirmationResult,otp){try{const result=await confirmationResult.confirm(otp);const user=result.user;// Create/update profile\nawait this.createOrUpdateUserProfile(user);return{success:true,user,message:'Login successful'};}catch(error){console.error('Error verifying OTP:',error);return{success:false,error:'Invalid OTP. Please try again.'};}}// Create or update user profile in Firestore\nasync createOrUpdateUserProfile(user){let additionalData=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};try{const userRef=doc(db,'users',user.uid);const userSnap=await getDoc(userRef);const userData=_objectSpread({uid:user.uid,phoneNumber:user.phoneNumber,lastLogin:new Date(),updatedAt:new Date()},additionalData);if(!userSnap.exists()){// Create profile\nuserData.createdAt=new Date();userData.name=additionalData.name||'';userData.email=additionalData.email||'';userData.addresses=[];userData.orderHistory=[];await setDoc(userRef,userData);}else{// Update profile\nawait updateDoc(userRef,userData);}return userData;}catch(error){console.error('Error creating/updating user profile:',error);throw error;}}// Get user profile\nasync getUserProfile(userId){try{const userRef=doc(db,'users',userId);const userSnap=await getDoc(userRef);return userSnap.exists()?userSnap.data():null;}catch(error){console.error('Error getting user profile:',error);throw error;}}// Update profile\nasync updateUserProfile(userId,profileData){try{const userRef=doc(db,'users',userId);const updateData=_objectSpread(_objectSpread({},profileData),{},{updatedAt:new Date()});await updateDoc(userRef,updateData);if(profileData.name&&auth.currentUser){await updateProfile(auth.currentUser,{displayName:profileData.name});}return{success:true,message:'Profile updated successfully'};}catch(error){console.error('Error updating user profile:',error);return{success:false,error:error.message};}}// Add address\nasync addAddress(userId,address){try{const userRef=doc(db,'users',userId);const userSnap=await getDoc(userRef);if(userSnap.exists()){const userData=userSnap.data();const addresses=userData.addresses||[];const newAddress=_objectSpread(_objectSpread({id:Date.now().toString()},address),{},{createdAt:new Date()});addresses.push(newAddress);await updateDoc(userRef,{addresses,updatedAt:new Date()});return{success:true,address:newAddress,message:'Address added successfully'};}}catch(error){console.error('Error adding address:',error);return{success:false,error:error.message};}}// Logout\nasync logout(){try{await signOut(auth);this.recaptchaVerifier=null;return{success:true,message:'Logged out successfully'};}catch(error){console.error('Error logging out:',error);return{success:false,error:error.message};}}// Auth state listener\nonAuthStateChanged(callback){return onAuthStateChanged(auth,callback);}// Full cleanup\ncleanup(){if(this.recaptchaVerifier){if(typeof this.recaptchaVerifier.clear==='function'){this.recaptchaVerifier.clear();}this.recaptchaVerifier=null;}}}const authService=new AuthService();export default authService;","map":{"version":3,"names":["signInWithPhoneNumber","RecaptchaVerifier","signOut","updateProfile","onAuthStateChanged","doc","setDoc","getDoc","updateDoc","auth","db","AuthService","constructor","recaptchaVerifier","initializeRecaptcha","containerId","arguments","length","undefined","cleanupRecaptcha","window","document","container","getElementById","console","warn","concat","Error","error","size","theme","callback","response","log","expired-callback","clear","_","sendOTP","phoneNumber","digitsOnly","replace","formattedPhone","startsWith","render","renderError","Promise","resolve","setTimeout","confirmationResult","success","message","code","data","customData","stack","userMessage","errorCode","verifyOTP","otp","result","confirm","user","createOrUpdateUserProfile","additionalData","userRef","uid","userSnap","userData","_objectSpread","lastLogin","Date","updatedAt","exists","createdAt","name","email","addresses","orderHistory","getUserProfile","userId","updateUserProfile","profileData","updateData","currentUser","displayName","addAddress","address","newAddress","id","now","toString","push","logout","cleanup","authService"],"sources":["/Users/chandrilmallick/Downloads/web-projects/dabba-app/frontend/src/services/authService.js"],"sourcesContent":["import {\n  signInWithPhoneNumber,\n  RecaptchaVerifier,\n  signOut,\n  updateProfile,\n  onAuthStateChanged\n} from 'firebase/auth';\nimport { doc, setDoc, getDoc, updateDoc } from 'firebase/firestore';\nimport { auth, db } from '../firebase/config';\n\nclass AuthService {\n  constructor() {\n    this.recaptchaVerifier = null;\n  }\n\n  // Initialize reCAPTCHA verifier\n  initializeRecaptcha(containerId = 'recaptcha-container') {\n    // Always create a fresh verifier to avoid stale tokens\n    this.cleanupRecaptcha();\n    \n    // Check if container exists in DOM - don't create it if missing\n    try {\n      if (typeof window !== 'undefined' && typeof document !== 'undefined') {\n        const container = document.getElementById(containerId);\n        if (!container) {\n          console.warn(`reCAPTCHA container '${containerId}' not found in DOM. Make sure it exists in your component.`);\n          throw new Error(`reCAPTCHA container '${containerId}' not found`);\n        }\n      }\n    } catch (error) {\n      console.warn('DOM container check failed:', error);\n      throw error;\n    }\n\n    try {\n      // Firebase v9 modular API: RecaptchaVerifier(auth, containerId, parameters)\n      this.recaptchaVerifier = new RecaptchaVerifier(\n        auth, // First parameter: auth instance\n        containerId, // Second parameter: container ID\n        {\n          size: 'normal', // Keep visible for Identity Platform debugging\n          theme: 'light',\n          callback: (response) => {\n            console.log('reCAPTCHA solved, response length:', response?.length);\n          },\n          'expired-callback': () => {\n            console.log('reCAPTCHA expired, recreating...');\n            this.cleanupRecaptcha();\n          },\n          'error-callback': (error) => {\n            console.error('reCAPTCHA error:', error);\n          }\n        }\n      );\n\n      console.log('RecaptchaVerifier created successfully for Identity Platform');\n      return this.recaptchaVerifier;\n    } catch (error) {\n      console.error('Failed to create RecaptchaVerifier:', error);\n      throw error;\n    }\n  }\n\n  // Cleanup reCAPTCHA\n  cleanupRecaptcha() {\n    if (this.recaptchaVerifier && typeof this.recaptchaVerifier.clear === 'function') {\n      try {\n        this.recaptchaVerifier.clear();\n      } catch (_) {\n        // ignore\n      }\n    }\n    this.recaptchaVerifier = null;\n  }\n\n  // Send OTP to phone number\n  async sendOTP(phoneNumber) {\n    try {\n      // Ensure phone number is in E.164 format\n      const digitsOnly = (phoneNumber || '').replace(/\\D/g, '');\n      let formattedPhone = '';\n      if (digitsOnly.startsWith('91')) {\n        formattedPhone = `+${digitsOnly}`;\n      } else if (phoneNumber.startsWith('+')) {\n        formattedPhone = `+${digitsOnly}`;\n      } else {\n        formattedPhone = `+91${digitsOnly}`;\n      }\n\n      console.log('Identity Platform: Attempting to send OTP to:', formattedPhone);\n\n      // Create fresh reCAPTCHA verifier with explicit render\n      const recaptchaVerifier = this.initializeRecaptcha();\n      \n      // Wait for reCAPTCHA to fully render before proceeding\n      try {\n        await recaptchaVerifier.render();\n        console.log('reCAPTCHA rendered successfully');\n      } catch (renderError) {\n        console.warn('reCAPTCHA render warning:', renderError);\n      }\n\n      // Add a small delay to ensure reCAPTCHA is ready\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      console.log('Identity Platform: RecaptchaVerifier ready, attempting signInWithPhoneNumber...');\n      const confirmationResult = await signInWithPhoneNumber(auth, formattedPhone, recaptchaVerifier);\n\n      console.log('Identity Platform: OTP sent successfully');\n      return {\n        success: true,\n        confirmationResult,\n        message: 'OTP sent successfully'\n      };\n    } catch (error) {\n      console.error('Identity Platform Error sending OTP:', {\n        code: error?.code,\n        message: error?.message,\n        data: error?.customData,\n        stack: error?.stack\n      });\n      \n      // Provide more specific error messages for Identity Platform\n      let userMessage = 'Failed to send OTP';\n      if (error?.code === 'auth/invalid-app-credential') {\n        userMessage = 'Identity Platform: App credentials invalid. This may be due to reCAPTCHA configuration or project settings.';\n      } else if (error?.code === 'auth/captcha-check-failed') {\n        userMessage = 'reCAPTCHA verification failed. Please complete the reCAPTCHA and try again.';\n      } else if (error?.code === 'auth/invalid-phone-number') {\n        userMessage = 'Invalid phone number format. Please check and try again.';\n      } else if (error?.code === 'auth/quota-exceeded') {\n        userMessage = 'SMS quota exceeded. Please try again later.';\n      } else if (error?.code === 'auth/too-many-requests') {\n        userMessage = 'ðŸŽ‰ Phone auth is working! Rate limit reached - please wait 15-30 minutes or try a different phone number.';\n      }\n\n      return {\n        success: false,\n        error: userMessage,\n        errorCode: error?.code\n      };\n    }\n  }\n\n  // Verify OTP and complete login\n  async verifyOTP(confirmationResult, otp) {\n    try {\n      const result = await confirmationResult.confirm(otp);\n      const user = result.user;\n\n      // Create/update profile\n      await this.createOrUpdateUserProfile(user);\n\n      return {\n        success: true,\n        user,\n        message: 'Login successful'\n      };\n    } catch (error) {\n      console.error('Error verifying OTP:', error);\n      return {\n        success: false,\n        error: 'Invalid OTP. Please try again.'\n      };\n    }\n  }\n\n  // Create or update user profile in Firestore\n  async createOrUpdateUserProfile(user, additionalData = {}) {\n    try {\n      const userRef = doc(db, 'users', user.uid);\n      const userSnap = await getDoc(userRef);\n\n      const userData = {\n        uid: user.uid,\n        phoneNumber: user.phoneNumber,\n        lastLogin: new Date(),\n        updatedAt: new Date(),\n        ...additionalData\n      };\n\n      if (!userSnap.exists()) {\n        // Create profile\n        userData.createdAt = new Date();\n        userData.name = additionalData.name || '';\n        userData.email = additionalData.email || '';\n        userData.addresses = [];\n        userData.orderHistory = [];\n\n        await setDoc(userRef, userData);\n      } else {\n        // Update profile\n        await updateDoc(userRef, userData);\n      }\n\n      return userData;\n    } catch (error) {\n      console.error('Error creating/updating user profile:', error);\n      throw error;\n    }\n  }\n\n  // Get user profile\n  async getUserProfile(userId) {\n    try {\n      const userRef = doc(db, 'users', userId);\n      const userSnap = await getDoc(userRef);\n\n      return userSnap.exists() ? userSnap.data() : null;\n    } catch (error) {\n      console.error('Error getting user profile:', error);\n      throw error;\n    }\n  }\n\n  // Update profile\n  async updateUserProfile(userId, profileData) {\n    try {\n      const userRef = doc(db, 'users', userId);\n      const updateData = {\n        ...profileData,\n        updatedAt: new Date()\n      };\n\n      await updateDoc(userRef, updateData);\n\n      if (profileData.name && auth.currentUser) {\n        await updateProfile(auth.currentUser, {\n          displayName: profileData.name\n        });\n      }\n\n      return {\n        success: true,\n        message: 'Profile updated successfully'\n      };\n    } catch (error) {\n      console.error('Error updating user profile:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  // Add address\n  async addAddress(userId, address) {\n    try {\n      const userRef = doc(db, 'users', userId);\n      const userSnap = await getDoc(userRef);\n\n      if (userSnap.exists()) {\n        const userData = userSnap.data();\n        const addresses = userData.addresses || [];\n\n        const newAddress = {\n          id: Date.now().toString(),\n          ...address,\n          createdAt: new Date()\n        };\n\n        addresses.push(newAddress);\n\n        await updateDoc(userRef, {\n          addresses,\n          updatedAt: new Date()\n        });\n\n        return {\n          success: true,\n          address: newAddress,\n          message: 'Address added successfully'\n        };\n      }\n    } catch (error) {\n      console.error('Error adding address:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  // Logout\n  async logout() {\n    try {\n      await signOut(auth);\n      this.recaptchaVerifier = null;\n      return {\n        success: true,\n        message: 'Logged out successfully'\n      };\n    } catch (error) {\n      console.error('Error logging out:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  // Auth state listener\n  onAuthStateChanged(callback) {\n    return onAuthStateChanged(auth, callback);\n  }\n\n  // Full cleanup\n  cleanup() {\n    if (this.recaptchaVerifier) {\n      if (typeof this.recaptchaVerifier.clear === 'function') {\n        this.recaptchaVerifier.clear();\n      }\n      this.recaptchaVerifier = null;\n    }\n  }\n}\n\nconst authService = new AuthService();\nexport default authService;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}